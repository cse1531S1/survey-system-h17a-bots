<!DOCTYPE html>
<!--
  This is a starter template page. Use this page to start your new project from
  scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>{% block title%}{% endblock %}</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">


    <!-- Bootstrap 3.3.6 -->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css') }}" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">

    <!-- Theme style -->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/AdminLTE.min.css') }}" />
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/skin-blue.min.css') }}" />


    <!-- jquery bootstrap multiselect -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/bootstrap.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/multiselect.min.js') }}"></script>

    <!-- AdminLTE App -->
    <script type="text/javascript" src="{{ url_for('static', filename='js/app.min.js') }}"></script>

    <!-- select2 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

    <!-- mystyle -->
    <link type="text/css" rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}" />

    {% block head %}
    {% endblock head %}
  </head>
  <body class="hold-transition skin-blue sidebar-mini">
    <div class="wrapper">

      <!-- Main Header -->
      <header class="main-header">

        <!-- Logo -->
        <a class="logo" href="/">
          <span class="logo-lg"><b>Group</b>BOTS</span>
        </a>

        <!-- Header Navbar -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <!-- Navbar Right Menu -->
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
              <!-- Messages: style can be found in dropdown.less-->
              <li class="dropdown messages-menu">

              </li>
              <!-- User Account Menu -->
              <li class="dropdown user user-menu">
                <!-- Menu Toggle Button -->
                {% if current_user.is_authenticated %}
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <span class="hidden-xs">Account</span>
                </a>
                <ul class="dropdown-menu">
                  <!-- The user image in the menu -->
                  <li class="user-header">
                    <p>
                    {{ current_user.username }}
                    <small>Last login timestamp: {{current_user.last_login.strftime('%d %B %Y - %H:%M:%S')}}</small>
                    </p>
                  </li>
                  <li class="user-footer">
                    <div class="pull-left">
                      <a href="{{ url_for('auth.change_password') }}" class="btn btn-default btn-flat">Change password</a>
                    </div>
                    <div class="pull-right">
                      <a href="{{ url_for('auth.logout') }}" class="btn btn-default btn-flat">Logout</a>
                    </div>
                  </li>
                </ul>
                {% else %}
                <div class="log-button">
                  <a type="button" class="btn btn-info" href="{{ url_for('auth.login') }}">Login</a>
                </div>
                {% endif %}
              </li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">

        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">

          <!-- Sidebar Menu -->
          <ul class="sidebar-menu">
            <li class="header">Survey Management System</li>
            <!-- Optionally, you can add icons to the links -->
            {% if current_user.is_authenticated %}
            <li class="treeview">
              <a href="#"><i class="fa fa-link"></i> <span>Surveys</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li><a href="{{ url_for('main.user', id=current_user.id) }}">Survey list</a></li>
                <li><a href="{{ url_for('main.create_survey') }}">Create a survey</a></li>
              </ul>
            </li>

            <li class="treeview">
              <a href="#"><i class="fa fa-link"></i> <span>Questions</span>
                <span class="pull-right-container">
                  <i class="fa fa-angle-left pull-right"></i>
                </span>
              </a>
              <ul class="treeview-menu">
                <li><a href="{{ url_for('main.question_pool') }}">Question pool</a></li>
                <li><a href="{{ url_for('main.create_question') }}">Create a question</a></li>
              </ul>
            </li>
            {% endif %}

          </ul>
          <!-- /.sidebar-menu -->
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <div class="content-header">
          {% for message in get_flashed_messages() %}
          <div class="alert alert-success text-center">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            {{ message }}
          </div>
          {% endfor %}

        </div>

        <!-- Main content -->
        <div class="content body">
          <div class="row">
            {% block page_content %} {% endblock %}
          </div>
        </div>
        <!-- /.content -->
      </div>
      <!-- /.content-wrapper -->

      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- To the right -->
        <div class="pull-right hidden-xs">
        </div>
        <!-- Default to the left -->
        <strong><a href="#">GroupBOTS</a></strong>
      </footer>

      <div class="control-sidebar-bg"></div>
    </div>
    <!-- ./wrapper -->
  </body>

</html>
