{% extends "base.html" %}
{% block title %}
Create a Survey
{% endblock %}
{% block page_content %}

<script type="text/javascript">
    $(document).ready(function() {
        $(".select").select2();
    });
</script>


<div class="col-md-12 row">
    <form action="" method="post" accept-charset="utf-8">
        <div class="text-center row">
            <p>Choose a Course:</p>
            <select name="course" id="course form-control" class="select input-large">
                {% for course in courses %}
                {% if course == selected_course %}
                <option selected="selected">{{ selected_course }}</option>
                {% else %}
                <option value="{{ course }}">{{ course }}</option>
                {% endif %}
                {% endfor %}
            </select>
        </div>
        <br />

        <div class="row">
            <div class="col-md-12">
                <input class="form-control" type="text" name="title" id="title" value="{{ description }}" placeholder="Enter the title of the survey" required/>
            </div>
        </div>

        <br />
        <div class="row">
            <div class="text-center">
                <p>Select questions to add to the survey</p>
                <br />
            </div>

            <div class="row drag-wrapper gu-unselectable col-md-12">
                <div class="col-sm-6 drag-container drag-box" id='left'>
                    {% for question in questions %}
                    <div value="{{ question.id }}">{{ question.description }}</div>
                    {% endfor %}
                </div>

                <div class="col-sm-6 drag-container drag-box" id='right'>
                </div>
            </div>

            <div class="row text-center">
                <br />
                <br />
                <button id="sub" type="" class="btn btn-primary" onclick="DoSubmit()">Submit</button>
            </div>
        </div>

        <input name="questions" id="questions" value=""></input>

        <br />
    </form>
</div>

<script src='https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js'></script>
<script charset="utf-8">
    dragula([$("#left").get(0), $("#right").get(0)]);
</script>
<script charset="utf-8">
    function DoSubmit(){
        var a = $('#right').children();
        var b = [];
        for(var i = 0; i<a.length; i++){
            b.push(a[i].getAttribute('value'));
        }
        $('#questions').attr('value', b);
    }
</script>
{% endblock %}
